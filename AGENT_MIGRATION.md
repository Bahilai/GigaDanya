# üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ AI Studio Agent API

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ GigaDanya –±—ã–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **Yandex AI Studio Agent API** –≤–º–µ—Å—Ç–æ –±–∞–∑–æ–≤–æ–≥–æ Foundation Models API.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

#### 1. **–ù–æ–≤—ã–π API Endpoint**
- **–°—Ç–∞—Ä—ã–π**: `https://llm.api.cloud.yandex.net/foundationModels/v1/completion`
- **–ù–æ–≤—ã–π**: `https://rest-assistant.api.cloud.yandex.net/v1/responses`

#### 2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞**
–í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç –∞–≥–µ–Ω—Ç–∞:

**–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç:**
```json
{
  "modelUri": "gpt://folder-id/yandexgpt-lite",
  "completionOptions": {...},
  "messages": [...]
}
```

**–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç:**
```json
{
  "prompt": {
    "id": "agent-id",
    "variables": {}
  },
  "input": "—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
  "stream": false
}
```

#### 3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞**
Agent API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç:

```json
{
  "output": [
    {
      "content": [
        {
          "text": "–æ—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞",
          "type": "text"
        }
      ]
    }
  ],
  "status": "completed"
}
```

## üìã –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. **`YandexAgentModels.kt`** - –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Agent API
   - `AgentRequest` - –∑–∞–ø—Ä–æ—Å –∫ –∞–≥–µ–Ω—Ç—É
   - `AgentResponse` - –æ—Ç–≤–µ—Ç –æ—Ç –∞–≥–µ–Ω—Ç–∞
   - `PromptConfig` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞
   - `OutputContent` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã–≤–æ–¥–∞

2. **`YandexAgentApi.kt`** - Retrofit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è Agent API

## üîß –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `app/build.gradle.kts`
–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ `YANDEX_AGENT_ID` –∏–∑ `local.properties`:

```kotlin
line.startsWith("YANDEX_AGENT_ID=") -> {
    yandexAgentId = line.substringAfter("=").trim()
}
```

### 2. `RetrofitInstance.kt`
- –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π `AGENT_BASE_URL`
- –°–æ–∑–¥–∞–Ω `agentRetrofit` —ç–∫–∑–µ–º–ø–ª—è—Ä
- –î–æ–±–∞–≤–ª–µ–Ω `agentApi` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ `agentId`

### 3. `ChatViewModel.kt`
- –ò–∑–º–µ–Ω–µ–Ω –º–µ—Ç–æ–¥ `fetchBotResponse()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Agent API
- –ó–∞–ø—Ä–æ—Å—ã —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `RetrofitInstance.agentApi`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AgentRequest` –≤–º–µ—Å—Ç–æ `YandexGptRequest`

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –î–æ–±–∞–≤—å—Ç–µ Agent ID –≤ `local.properties`:

```properties
YANDEX_API_KEY=–≤–∞—à_api_–∫–ª—é—á
YANDEX_FOLDER_ID=–≤–∞—à_folder_id
YANDEX_AGENT_ID=–≤–∞—à_agent_id
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –∞–≥–µ–Ω—Ç–∞ –≤ AI Studio:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Yandex Cloud Console](https://console.cloud.yandex.ru/)
2. –û—Ç–∫—Ä–æ–π—Ç–µ AI Studio
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ —Ä–æ–ª—å, —Ü–µ–ª—å –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –∞–≥–µ–Ω—Ç–∞
6. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `local.properties`

### 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:

```bash
./gradlew clean
./gradlew generateDebugBuildConfig
./gradlew build
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Agent API

1. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** - –ê–≥–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ AI Studio –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞–º–∏** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —Ä–æ–ª—å –∞–≥–µ–Ω—Ç–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ
3. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (tools), –±–∞–∑ –∑–Ω–∞–Ω–∏–π –∏ –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
4. **–õ—É—á—à–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç** - –ê–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
5. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∞–≥–µ–Ω—Ç–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°—Ç–∞—Ä—ã–π API (`YandexGptApi`) –æ—Å—Ç–∞–≤–ª–µ–Ω –≤ –∫–æ–¥–µ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `ChatViewModel`. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–º—É API, –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ –≤—ã–∑–æ–≤—ã –≤ `fetchBotResponse()`.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è AI Studio](https://yandex.cloud/ru/docs/ai-studio/)
- [–°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞](https://yandex.cloud/ru/docs/ai-studio/operations/agents/create-simple-text-agent)
- [API Reference](https://yandex.cloud/ru/docs/ai-studio/concepts/agents/)

---

**–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üéâ**

–¢–µ–ø–µ—Ä—å –≤–∞—à —á–∞—Ç-–±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ AI-–∞–≥–µ–Ω—Ç–∞ –∏–∑ Yandex AI Studio!

